# Проверяем уровень софта (TiMOS) и версию железа (SAS-X/SAS-M)
show version

# Проверяем аварии
show system alarms

# Проверяем с чего грузится (primary-image)
show bof

# И прописываем primary-image в secondary-image (То есть значения primary копируем в secondary)
bof secondary-image cf1:\images\TiMOS-B-4.0.R2\both.tim

# Создаем папку images и если она уже создана то удаляем старый софт
file

 # Проверить свободное место (нужно 40MB+)
file dir
file md images
file cd images



    # Если есть лишний софт то удалить его
    # delete TiMOS-B-4.0.R2\*.*
# rd TiMOS-B-4.0.R2

# file delete both.tim
exit

# Заливаем новый софт на DS (SAS-X/SAS-M) 
# ! Внимательнодля каждой версии SAS свой софт: 
scp -r /home/mpls/soft/7210-SAS-X-TiMOS-7.0.R13/ _IP_:cf1:/images/TiMOS-7.0.R13/
# или
scp -r /home/mpls/soft/7210-SAS-M-TiMOS-7.0.R13/  _IP_:cf1:/images/TiMOS-7.0.R13/

# Что бы проверить версию уже залитого софта 
show bof
show version
file version cf1:\images\TiMOS-7.0.R13\both.tim
file version cf1:\boot.tim

# Прописываем новое ПО стартовым
show bof
bof primary-image cf1:\images\TiMOS-7.0.R13\both.tim
bof save
admin save
show bof

# Заменяем стартовый образ (файл boot.tim)
file attrib -r boot.tim
file copy cf1:\images\TiMOS-7.0.R13\boot.tim cf1:\boot.tim force
file dir boot.tim
file version cf1:\boot.tim

# Выполнить бэкап конфигурации и скопировать его в соответствующую папку \\10.44.1.140\om\Backups\DS\ с именем YYMMDD_ds-xxx_before.cfg (если он выполнен до работ) или YYMMDD_ds-xxx_after.cfg (если он выполнен после работ):

scp butko@ds3-vin2:cf1:/ds3-vin2.cfg /home/butko/
2.	Основная фаза – ночные работы
Во время проведения работ необходимо мониторить аварии по DS-ам в системе SAM, а также BSC/RNC, базовые станции которых подключены к DS-ам.

Для проведения работ на DS необходимо подключиться к серверу Figaro, затем к DS:

butko@10.44.1.219
butko@figaro:~$ ssh ds1-chg44

# Выполнить Нealth Check
############## HC #########################################
environment no more
show system alarms
show version
show bof
file dir
show port
show card state
show service sdp-using
show router interface
show system ntp
show system ptp
show system security ssh

Выполнить переключение стартового ПО на новое и выполнить рестарт DS:

# Рестартуем DS (ночная фаза)
show bof
show version
file version cf1:\images\TiMOS-7.0.R13\both.tim
file version cf1:\boot.tim

admin reboot upgrade

# Время недоступности DS после рестарта от 6 до 10 минут



# Результат загрузки можно посмотреть
show boot-messages

# При проверке лога загрузки нужно обратить внимания на строки:
#?Attempting to load from file cf1:/boot.tim
#Version L-7.0.R9, Thu Oct 15 08:09:39 IST 2015 by builder in /home/builder/7.0B1/R9/panos/main
И только при удачной загрузке с файла cf1:/boot.tim продолжить процедуру апгрейда golden-bootstrap


# После перезагрузки необходимо завершить процедуру обновлением Golden BOOT Loader командой 
admin update-golden-bootstrap
admin check-golden-bootstrap


# После апгрейда сделать
bof save
admin save


# После окончания работ выполнить НС.
environment no more
show system alarms
show version
show bof
file dir
show port
show card state
show service sdp-using
show router interface
show system ntp
show system ptp
show system security ssh

